<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.72.0" /><META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="icon" type="image/png" href="/csm-docs/favicons/favicon-16x16.png" sizes="16x16">

<title>Design | Dell Technologies</title><meta property="og:title" content="Design" />
<meta property="og:description" content="Dell EMC Container Storage Modules (CSM) for Authorization design
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dell.github.io/csm-docs/v1/authorization/design/" />
<meta property="article:modified_time" content="2021-12-03T13:03:43-04:00" /><meta property="og:site_name" content="Dell Technologies" />
<meta itemprop="name" content="Design">
<meta itemprop="description" content="Dell EMC Container Storage Modules (CSM) for Authorization design
">
<meta itemprop="dateModified" content="2021-12-03T13:03:43-04:00" />
<meta itemprop="wordCount" content="1824">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Design"/>
<meta name="twitter:description" content="Dell EMC Container Storage Modules (CSM) for Authorization design
"/>





<link rel="preload" href="/csm-docs/scss/main.min.cbfbd43db7dbcdabe8b8c192af8ac625d7fc097ce24bb87c3dd7d3c4225e3869.css" as="style">
<link href="/csm-docs/scss/main.min.cbfbd43db7dbcdabe8b8c192af8ac625d7fc097ce24bb87c3dd7d3c4225e3869.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>




  </head>
  <body class="td-page"> 
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/csm-docs/">
		<span class="navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1017 132"><defs><style>.cls-1{fill:#fff}</style></defs><title>DellTech_Logo_Prm_Wht_rgb</title><path class="cls-1" d="M1015 84.89c0-12.23-6.8-17.66-20.39-20.38s-21.73-4.08-21.73-13.58c0-6.8 5.44-10.87 15-10.87 12.22.0 16.3 5.43 16.3 12.22l1.36 1.36h5.43l1.37-1.36c0-13.58-10.88-19-24.46-19-15 0-23.1 8.15-23.1 17.67.0 10.86 8.15 16.3 21.73 19s20.38 4.08 20.38 15c0 6.79-4.07 12.23-17.66 12.23-12.22.0-17.66-6.8-17.66-15l-1.35-1.36h-5.44l-1.35 1.36c0 12.23 9.5 21.74 25.8 21.74 17.66.0 25.82-8.15 25.82-19M956.58 71.31l1.36-1.37V65.87c0-19-10.87-32.61-29.89-32.61s-29.89 13.59-29.89 32.61v2.72c0 19 9.51 35.32 31.25 35.32 19 0 25.81-12.23 27.17-20.38l-1.36-1.36h-5.43l-1.36 1.36c-2.72 8.15-8.16 13.59-19 13.59-17.66.0-23.1-16.31-23.1-24.46l1.36-1.35zm-8.15-6.8H907.67l-1.36-1.36c0-9.51 5.44-23.09 21.74-23.09s21.74 13.58 21.74 23.09zm-59.78 36.68V36l-1.36-1.35h-5.43L880.5 36v65.22l1.36 1.36h5.43zm0-78.8V14.24l-1.36-1.36h-5.43l-1.36 1.36v8.15l1.36 1.36h5.43zM837 97.12c-13.59.0-21.74-9.52-21.74-28.53S823.44 40.06 837 40.06s21.73 9.5 21.73 28.53S850.61 97.12 837 97.12M858.76 93c0 17.66-4.07 31.25-20.38 31.25-12.22.0-16.3-5.44-17.66-12.23l-1.35-1.36h-5.44l-1.36 1.36c1.36 10.87 9.51 19 25.81 19 17.67.0 28.53-10.87 28.53-38V36l-1.35-1.35h-4.08L860.12 36l-1.36 8.16H857.4c-2.71-5.43-9.5-10.87-21.74-10.87-19 0-28.53 15-28.53 35.33s9.52 35.32 28.53 35.32c12.24.0 19-5.43 21.74-10.87zm-88.3-53c13.58.0 23.09 10.87 23.09 28.53S784 97.12 770.46 97.12s-23.1-10.87-23.1-28.53 9.51-28.53 23.1-28.53m0 63.85c17.66.0 31.25-12.23 31.25-35.32s-13.59-35.33-31.25-35.33-31.25 12.23-31.25 35.33 13.59 35.32 31.25 35.32m-40.76-2.72V8.81l-1.36-1.36h-5.43l-1.36 1.36v92.38l1.36 1.36h5.43zM680.8 40.06c13.58.0 23.09 10.87 23.09 28.53s-9.51 28.53-23.09 28.53-23.1-10.87-23.1-28.53 9.51-28.53 23.1-28.53m0 63.85c17.66.0 31.25-12.23 31.25-35.32S698.46 33.26 680.8 33.26s-31.25 12.23-31.25 35.33 13.59 35.32 31.25 35.32m-39.4-2.72V60.43c0-17.66-9.51-27.17-24.45-27.17-9.52.0-17.67 4.08-21.74 10.87h-1.36L592.49 36l-1.36-1.35h-4.08L585.7 36v65.22l1.35 1.36h5.44l1.36-1.36V64.51c0-15 6.79-24.45 21.73-24.45 10.87.0 17.66 6.79 17.66 20.37v40.76l1.37 1.36H640zm-69.29.0V60.43c0-17.66-9.51-27.17-24.45-27.17-9.52.0-17.66 4.08-21.74 10.87h-1.36V8.81L523.2 7.45h-5.43l-1.36 1.36v92.38l1.36 1.36h5.43l1.36-1.36V64.51c0-15 6.8-24.45 21.74-24.45 10.87.0 17.66 6.79 17.66 20.37v40.76l1.36 1.36h5.44zM455.28 68.59c0-19 9.5-28.53 23.09-28.53s19 8.15 20.38 16.29l1.35 1.37h5.44l1.36-1.37c-1.36-13.58-12.23-23.09-28.53-23.09-17.66.0-31.24 10.87-31.24 35.33s13.58 35.32 31.24 35.32c16.3.0 27.17-9.51 28.53-23.1l-1.36-1.36H500.1l-1.35 1.36C497.39 89 492 97.12 478.37 97.12s-23.09-9.52-23.09-28.53m-14.95 2.72 1.36-1.37V65.87c0-19-10.87-32.61-29.9-32.61s-29.88 13.59-29.88 32.61v2.72c0 19 9.51 35.32 31.25 35.32 19 0 25.81-12.23 27.17-20.38L439 82.17h-5.43l-1.36 1.36c-2.72 8.15-8.15 13.59-19 13.59-17.66.0-23.1-16.31-23.1-24.46l1.36-1.35zm-8.15-6.8H391.42l-1.36-1.36c0-9.51 5.44-23.09 21.73-23.09s21.75 13.58 21.75 23.09zM395.57 12.88V8.81l-1.36-1.36H323.56L322.2 8.81v4.07l1.36 1.36h29.89l1.36 1.36v85.59l1.36 1.36h5.43l1.36-1.36V15.6l1.36-1.36h29.89z"/><path class="cls-1" d="M322.2 83.65v18.9H260.85V7.45h21.6v76.2zM38.55 102.55A47.57 47.57.0 0084.58 67l53.8 42 53.77-42v35.56H253.5V83.65H213.75V7.45h-21.6V43L140.58 83.3l-11.54-9L153.73 55l26.89-21L165.27 22 113.69 62.3l-11.53-9L153.73 13 138.38 1 84.58 43a47.57 47.57.0 00-46-35.58H0v95.1zM21.6 83.65V26.35H38.55c14.33.0 26 12.83 26 28.65S52.88 83.65 38.55 83.65z"/></svg></span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/csm-docs/docs/" ><span>Dell EMC Container Storage Modules (CSM)</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/csm-docs/blog/" ><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="https://github.com/dell/csm" target="_blank" ><span>GitHub</span></a>
			</li>
			
			
			<li class="nav-item dropdown d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="https://dell.github.io/csm-docs/docs/">Current(v1.1)</a>
	
	<a class="dropdown-item" href="https://dell.github.io/csm-docs/v1">v1.0</a>
	
	<a class="dropdown-item" href="https://dell.github.io/csm-docs/v2">Previous</a>
	
	<a class="dropdown-item" href="https://dell.github.io/csm-docs/v3">Older</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/csm-docs/offline-search-index.50256c0d013f6d1f45709e2a14e9c4e3.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <h3> This doc version is no longer supported by us. You can check our <a href="/csm-docs/docs">latest version </a></h3>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center d-lg-none">
    



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/csm-docs/offline-search-index.50256c0d013f6d1f45709e2a14e9c4e3.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="csm-docsv1">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/deployment/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Deployment</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1deployment">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1deploymentcsmapi" href="/csm-docs/v1/deployment/csmapi/">CSM REST API</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1deploymentcsmcli" href="/csm-docs/v1/deployment/csmcli/">CSM CLI</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1deploymenttroubleshooting" href="/csm-docs/v1/deployment/troubleshooting/">Troubleshooting</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/faq/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">FAQ</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1faq">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">CSI Drivers</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriver">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/installation/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Installation</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriverinstallation">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/installation/helm/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Using Helm</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriverinstallationhelm">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationhelmpowerflex" href="/csm-docs/v1/csidriver/installation/helm/powerflex/">PowerFlex</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationhelmpowermax" href="/csm-docs/v1/csidriver/installation/helm/powermax/">PowerMax</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationhelmisilon" href="/csm-docs/v1/csidriver/installation/helm/isilon/">PowerScale</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationhelmpowerstore" href="/csm-docs/v1/csidriver/installation/helm/powerstore/">PowerStore</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationhelmunity" href="/csm-docs/v1/csidriver/installation/helm/unity/">Unity</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/installation/operator/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Using Operator</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriverinstallationoperator">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationoperatorpowerflex" href="/csm-docs/v1/csidriver/installation/operator/powerflex/">PowerFlex</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationoperatorpowermax" href="/csm-docs/v1/csidriver/installation/operator/powermax/">PowerMax</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationoperatorisilon" href="/csm-docs/v1/csidriver/installation/operator/isilon/">PowerScale</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationoperatorpowerstore" href="/csm-docs/v1/csidriver/installation/operator/powerstore/">PowerStore</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationoperatorunity" href="/csm-docs/v1/csidriver/installation/operator/unity/">Unity</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/installation/offline/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Offline Installer</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriverinstallationoffline">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/installation/test/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Testing Drivers</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriverinstallationtest">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationtestpowerflex" href="/csm-docs/v1/csidriver/installation/test/powerflex/">PowerFlex</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationtestpowermax" href="/csm-docs/v1/csidriver/installation/test/powermax/">PowerMax</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationtestpowerscale" href="/csm-docs/v1/csidriver/installation/test/powerscale/">PowerScale</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationtestpowerstore" href="/csm-docs/v1/csidriver/installation/test/powerstore/">PowerStore</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverinstallationtestunity" href="/csm-docs/v1/csidriver/installation/test/unity/">Unity</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/uninstall/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Uninstallation</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriveruninstall">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/upgradation/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Upgrade</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriverupgradation">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverupgradationdriversoperator" href="/csm-docs/v1/csidriver/upgradation/drivers/operator/">Dell CSI Operator</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverupgradationdriverspowerflex" href="/csm-docs/v1/csidriver/upgradation/drivers/powerflex/">PowerFlex</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverupgradationdriverspowermax" href="/csm-docs/v1/csidriver/upgradation/drivers/powermax/">PowerMax</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverupgradationdriversisilon" href="/csm-docs/v1/csidriver/upgradation/drivers/isilon/">PowerScale</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverupgradationdriverspowerstore" href="/csm-docs/v1/csidriver/upgradation/drivers/powerstore/">PowerStore</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverupgradationdriversunity" href="/csm-docs/v1/csidriver/upgradation/drivers/unity/">Unity</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/features/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Features</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriverfeatures">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverfeaturespowerflex" href="/csm-docs/v1/csidriver/features/powerflex/">PowerFlex</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverfeaturespowermax" href="/csm-docs/v1/csidriver/features/powermax/">PowerMax</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverfeaturespowerscale" href="/csm-docs/v1/csidriver/features/powerscale/">PowerScale</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverfeaturespowerstore" href="/csm-docs/v1/csidriver/features/powerstore/">PowerStore</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverfeaturesunity" href="/csm-docs/v1/csidriver/features/unity/">Unity</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/troubleshooting/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidrivertroubleshooting">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidrivertroubleshootingoperator" href="/csm-docs/v1/csidriver/troubleshooting/operator/">Dell CSI Operator</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidrivertroubleshootingpowerflex" href="/csm-docs/v1/csidriver/troubleshooting/powerflex/">PowerFlex</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidrivertroubleshootingpowermax" href="/csm-docs/v1/csidriver/troubleshooting/powermax/">PowerMax</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidrivertroubleshootingpowerscale" href="/csm-docs/v1/csidriver/troubleshooting/powerscale/">PowerScale</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidrivertroubleshootingpowerstore" href="/csm-docs/v1/csidriver/troubleshooting/powerstore/">PowerStore</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidrivertroubleshootingunity" href="/csm-docs/v1/csidriver/troubleshooting/unity/">Unity</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/release/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Release Notes</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriverrelease">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverreleaseoperator" href="/csm-docs/v1/csidriver/release/operator/">Operator</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverreleasepowerflex" href="/csm-docs/v1/csidriver/release/powerflex/">PowerFlex</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverreleasepowermax" href="/csm-docs/v1/csidriver/release/powermax/">PowerMax</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverreleasepowerscale" href="/csm-docs/v1/csidriver/release/powerscale/">PowerScale</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverreleasepowerstore" href="/csm-docs/v1/csidriver/release/powerstore/">PowerStore</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverreleaseunity" href="/csm-docs/v1/csidriver/release/unity/">Unity</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/partners/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Our Ecosystem Partners</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriverpartners">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverpartnersoperator" href="/csm-docs/v1/csidriver/partners/operator/">OperatorHub.io</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverpartnersredhat" href="/csm-docs/v1/csidriver/partners/redhat/">Red Hat OpenShift</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverpartnersdocker" href="/csm-docs/v1/csidriver/partners/docker/">MKE</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverpartnersrancher" href="/csm-docs/v1/csidriver/partners/rancher/">RKE</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1csidriverpartnerstanzu" href="/csm-docs/v1/csidriver/partners/tanzu/">VMware Tanzu</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/csidriver/archives/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Archives</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1csidriverarchives">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/authorization/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Authorization</a>
  </li>
  <ul>
    <li class="collapse show" id="csm-docsv1authorization">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page  active" id="m-csm-docsv1authorizationdesign" href="/csm-docs/v1/authorization/design/">Design</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1authorizationdeployment" href="/csm-docs/v1/authorization/deployment/">Deployment</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1authorizationuninstallation" href="/csm-docs/v1/authorization/uninstallation/">Uninstallation</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1authorizationcli" href="/csm-docs/v1/authorization/cli/">CLI</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1authorizationtroubleshooting" href="/csm-docs/v1/authorization/troubleshooting/">Troubleshooting</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/observability/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Observability</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1observability">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/observability/design/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Design</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1observabilitydesign">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/observability/metrics/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Metrics</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1observabilitymetrics">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1observabilitymetricspowerflex" href="/csm-docs/v1/observability/metrics/powerflex/">PowerFlex Metrics</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1observabilitymetricspowerstore" href="/csm-docs/v1/observability/metrics/powerstore/">PowerStore Metrics</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/observability/deployment/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Deployment</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1observabilitydeployment">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1observabilitydeploymenthelm" href="/csm-docs/v1/observability/deployment/helm/">Helm</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1observabilitydeploymentonline" href="/csm-docs/v1/observability/deployment/online/">Installer</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1observabilitydeploymentoffline" href="/csm-docs/v1/observability/deployment/offline/">Offline Installer</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/observability/uninstall/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Uninstallation</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1observabilityuninstall">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/observability/upgrade/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Upgrade</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1observabilityupgrade">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/observability/troubleshooting/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1observabilitytroubleshooting">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/replication/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Replication</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1replication">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/replication/deployment/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Deployment</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1replicationdeployment">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationdeploymentinstallation" href="/csm-docs/v1/replication/deployment/installation/">Installation</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationdeploymentconfigmap-secrets" href="/csm-docs/v1/replication/deployment/configmap-secrets/">ConfigMap &amp; Secrets</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationdeploymentinstall-repctl" href="/csm-docs/v1/replication/deployment/install-repctl/">Installation using repctl</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationdeploymentstorageclasses" href="/csm-docs/v1/replication/deployment/storageclasses/">Storage Class</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationdeploymentpowermax" href="/csm-docs/v1/replication/deployment/powermax/">PowerMax</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationdeploymentpowerstore" href="/csm-docs/v1/replication/deployment/powerstore/">PowerStore</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationarchitecture" href="/csm-docs/v1/replication/architecture/">Architecture</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationcluster-topologies" href="/csm-docs/v1/replication/cluster-topologies/">Cluster Topologies</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationdisaster-recovery" href="/csm-docs/v1/replication/disaster-recovery/">Disaster Recovery</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationhigh-availability" href="/csm-docs/v1/replication/high-availability/">High Availability</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationmonitoring" href="/csm-docs/v1/replication/monitoring/">Monitoring</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationreplication-actions" href="/csm-docs/v1/replication/replication-actions/">Replication Actions</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationtools" href="/csm-docs/v1/replication/tools/">Tools</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1replicationtroubleshooting" href="/csm-docs/v1/replication/troubleshooting/">Troubleshooting</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/resiliency/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Resiliency</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1resiliency">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1resiliencydesign" href="/csm-docs/v1/resiliency/design/">Design</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1resiliencyuninstallation" href="/csm-docs/v1/resiliency/uninstallation/">Uninstallation</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1resiliencyusecases" href="/csm-docs/v1/resiliency/usecases/">Use Cases</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1resiliencydeployment" href="/csm-docs/v1/resiliency/deployment/">Deployment</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1resiliencyupgrade" href="/csm-docs/v1/resiliency/upgrade/">Upgrade</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1resiliencytroubleshooting" href="/csm-docs/v1/resiliency/troubleshooting/">Troubleshooting</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/snapshots/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Snapshots</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1snapshots">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/grasp/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Learn</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1grasp">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1graspstart" href="/csm-docs/v1/grasp/start/">Getting Started</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-csm-docsv1graspvideo" href="/csm-docs/v1/grasp/video/">Quick video lessons</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/troubleshooting/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1troubleshooting">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/support/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Support</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1support">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/csm-docs/v1/contributionguidelines/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contribution Guidelines</a>
  </li>
  <ul>
    <li class="collapse " id="csm-docsv1contributionguidelines">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            



<nav id="TableOfContents">
  <ul>
    <li><a href="#terminology">Terminology</a></li>
    <li><a href="#birds-eye-view">Bird&rsquo;s Eye View</a>
      <ul>
        <li><a href="#kubernetes">Kubernetes</a></li>
        <li><a href="#csi-driver">CSI Driver</a></li>
        <li><a href="#sidecar-proxy">Sidecar Proxy</a></li>
        <li><a href="#csm-for-authorization-server">CSM for Authorization Server</a></li>
        <li><a href="#csm-for-authorization-cli">CSM for Authorization CLI</a></li>
        <li><a href="#storage-array">Storage Array</a></li>
      </ul>
    </li>
    <li><a href="#how-it-works">How it Works</a>
      <ul>
        <li><a href="#bearer-tokens">Bearer Tokens</a></li>
        <li><a href="#roles">Roles</a></li>
        <li><a href="#policy">Policy</a></li>
        <li><a href="#quota--volume-ownership">Quota &amp; Volume Ownership</a></li>
      </ul>
    </li>
    <li><a href="#cross-cutting-concerns">Cross-Cutting Concerns</a>
      <ul>
        <li><a href="#logging">Logging</a></li>
      </ul>
    </li>
    <li><a href="#observability">Observability</a></li>
  </ul>
</nav>




          </div> 
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
           
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://dell.github.io/csm-docs/v1/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://dell.github.io/csm-docs/v1/authorization/">Authorization</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://dell.github.io/csm-docs/v1/authorization/design/">Design</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Design</h1>

	       
	<p>Container Storage Modules (CSM) for Authorization is designed as a service mesh solution and consists of many internal components that work together in concert to achieve its overall functionality.</p>
<p>This document provides an overview of the major components, including how they fit together and pointers to implementation details.</p>
<p>If you are a developer who is new to CSM for Authorization and want to build a mental map of how it works, you&rsquo;re in the right place.</p>
<h2 id="terminology">Terminology</h2>
<ul>
<li><strong>Service Mesh</strong> - An infrastructure layer consisting of proxies that intercept and route requests between existing services.</li>
<li><strong>CSI</strong> - Acronym for the Container Storage Interface.</li>
<li><strong>Proxy (L7)</strong> - A gateway between networked services that inspects request traffic.</li>
<li><strong>Sidecar Proxy</strong> - A service mesh proxy that runs alongside existing services, rather than within them.</li>
<li><strong>Pod</strong> - A Kubernetes abstraction for a set of related containers that are to be considered as one unit.</li>
<li><strong>Tenant</strong> - A named persona who owns a Kubernetes cluster and is considered the &ldquo;client-side&rdquo; user.</li>
<li><strong>Storage Administrator</strong> - A named persona who owns a storage array and is considered the admin user.</li>
</ul>
<h2 id="birds-eye-view">Bird&rsquo;s Eye View</h2>
<pre><code>+-----------------------------------+                                                                                 
|   Kubernetes                      |                                                                                 
|                                   |                                                                                 
|  +---------+         +---------+  |            +---------------+                                            
|  | CSI     |         | Sidecar |  |            | CSM           |              +---------+        
|  | Driver  |---------&gt; Proxy   |---------------&gt; Authorization |--------------&gt; Storage |                              
|  +---------+         +---------+  |            | Server        |              | Array   |                              
|                                   |            +---------------+              +---------+                              
+-----------------------------------+                  ^                                                              
                                                       |                                                              
                                                       |                                                              
                                                       |                                                              
                                                 +------------+                                                       
                                                 |  karavictl |                                                       
                                                 |  CLI       |                                                       
                                                 +------------+                                                 
</code></pre><p><strong>NOTE:</strong> Arrows indicate request or connection initiation, not necessarily data flow direction.</p>
<p>The sections below explain each component in the diagram.</p>
<h3 id="kubernetes">Kubernetes</h3>
<p>The architecture assumes a Kubernetes cluster that intends to offer external storage to applications hosted therein.
The mechanism for managing this storage would utilize a CSI Driver.</p>
<p><strong>Architecture Invariant</strong>: We assume there may be many Kubernetes clusters, potentially containing multiple CSI Drivers each with their own Sidecar Proxy.</p>
<h3 id="csi-driver">CSI Driver</h3>
<p>A CSI Driver supports the Container Service Interface (CSI) specification. Dell EMC provides customers with CSI Drivers for its various storage arrays.
CSM for Authorization intends to support a majority, if not all, of these drivers.</p>
<p>A CSI Driver will typically be configured to communicate directly to its intended storage array and as such will be limited in using only the authentication
methods supported by the Storage Array itself, e.g. Basic authentication over TLS.</p>
<p><strong>Architecture Invariant</strong>: We try to avoid having to make any code changes to the CSI Driver when adding support for it. Any CSI Driver should ideally not be aware that it is communicating to the Sidecar Proxy.</p>
<h3 id="sidecar-proxy">Sidecar Proxy</h3>
<p>The CSM for Authorization Sidecar Proxy is a sidecar container that gets &ldquo;injected&rdquo; into the CSI Driver&rsquo;s Pod. It acts as a proxy and forwards all requests to a
CSM Authorization Server.</p>
<p>The <a href="#csi-driver">CSI Driver section</a> noted the limitation of a CSI Driver using Storage Array supported authentication methods only. By nature of being a proxy, the CSM for Authorization
Sidecar Proxy is able to override the Authorization HTTP header for outbound requests to use Bearer tokens. Such tokens are managed by CSM for Authorization as will
be described later in this document.</p>
<h3 id="csm-for-authorization-server">CSM for Authorization Server</h3>
<p>The CSM for Authorization Server is, at its core, a Layer 7 proxy for intercepting traffic between a CSI Driver and a Storage Array.</p>
<p>Inbound requests are expected to originate from the CSM for Authorization Sidecar Proxy, for the following reasons:</p>
<ul>
<li>Processing a set of agreed upon HTTP headers (added by the CSM for Authorization Sidecar Proxy) to assist in routing traffic to the intended Storage Array.</li>
<li>Inspection of CSM-specific Authorization Bearer tokens.</li>
</ul>
<h3 id="csm-for-authorization-cli">CSM for Authorization CLI</h3>
<p>The <a href="../cli"><em>karavictl</em></a> CLI (Command Line Interface) application allows Storage Admins to manage and interact with a running CSM for Authorization Server.</p>
<p>Additionally, <em>karavictl</em> provides functionality for supporting the sidecar proxy injection mechanism mentioned above. Injection is discussed in more detail later
on in this document.</p>
<h3 id="storage-array">Storage Array</h3>
<p>A Storage Array is typically considered to be one of the various Dell EMC storage offerings, e.g. Dell EMC PowerFlex which is supported by CSM for Authorization
today.  Support for more Storage Arrays will come in the future.</p>
<h2 id="how-it-works">How it Works</h2>
<p>CSM for Authorization intends to override the existing authorization methods between a CSI Driver and its Storage Array. This may be desirable for several reasons, if:</p>
<ul>
<li>The CSI Driver requires privileged login credentials (e.g. &ldquo;root&rdquo;) in order to function.</li>
<li>The Storage Array does not natively support the concept of RBAC and/or multi-tenancy.</li>
</ul>
<p>This section of of the document describes how CSM for Authorization provides a solution to these problems.</p>
<h3 id="bearer-tokens">Bearer Tokens</h3>
<p>CSM for Authorization overrides any existing authorization mechanism between a CSI Driver and its corresponding Storage Array with the use of JSON Web Tokens (JWTs). The CSI Driver and Storage Array will not be aware of this taking place.</p>
<p>In the context of <a href="https://tools.ietf.org/html/rfc6749#section-1.5">RFC-6749</a> there are two such JWTs that are used:</p>
<ul>
<li>Access token: a single token valid for a short period of time.</li>
<li>Refresh token: a single token used to obtain access tokens.  Typically valid for a longer period of time.</li>
</ul>
<p>Both tokens are opaque to the client, yet provide meaningful information to the server, specifically:</p>
<ul>
<li>The Tenant for whom the token is associated with.</li>
<li>The Roles that are bound to the Tenant.</li>
</ul>
<p>Tokens encode the following set of claims:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">&#34;aud&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;karavi&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;exp&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1915585883</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;iss&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;com.dell.karavi&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;sub&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;karavi-tenant&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;roles&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;role-a,role-b,role-c&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;group&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Tenant-1&#34;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>Both tokens are signed using a server-side secret preventing the risk of tampering by any client. For example, a bad-actor is unable to modify a token to give themselves a role that they should not have, at least without knowing the server-side secret.</p>
<p>The refresh approach is beneficial for the following reasons:</p>
<ul>
<li>Accidental exposure of an access token poses a lesser security concern, given the set expiration time is short (e.g. 30 seconds).</li>
<li>The CSM for Authorization Server can fully trust the access token without having to perform a database check on each request (doing so would nullify the benefits of using tokens in the first place).</li>
<li>The CSM for Authorization Server can defer Tenant checks at refresh time only, e.g. do not allow refresh if the Tenant&rsquo;s access has been revoked by a Storage Admin. There may be a short time window in between revocation and enforcement, depending on the access token&rsquo;s expiration time.</li>
</ul>
<p>The following diagram shows the access and refresh tokens in play and how a valid access token is required for a request to be proxied to the intended Storage Array.</p>
<pre><code>  +---------+                                           +---------------+
  |         |                                           |               |
  |         |                                           |               |       +----------+
  |         |--(A)------------ Access Token -----------&gt;|               |------&gt;|          |
  |         |                                           |     CSM       |       |          |
  |         |&lt;-(B)---------- Protected Resource --------| Authorization |&lt;------|  Storage |
  | Sidecar |                                           |     Server    |       |   Array  |
  | Proxy   |--(C)------------ Access Token -----------&gt;|               |       |          |
  |         |                                           |               |       |          |
  |         |&lt;-(D)------ Invalid Token Error -----------|               |       |          |
  |         |                                           |               |       +----------+
  |         |                                           |               |
  |         |--(E)----------- Refresh Token -----------&gt;|               |
  |         |            &amp; Expired Access Token         |               |
  |         |&lt;-(F)----------- Access Token -------------|               |
  +---------+                                           +---------------+
</code></pre><ul>
<li>A) CSI Driver makes a request to the Storage Array:
<ul>
<li>request is intercepted by the Sidecar Proxy to add the access token.</li>
<li>The CSM for Authorization Server deems the access token valid.</li>
<li>The CSM for Authorization Server permits the request to be proxied to the intended Storage Array.</li>
</ul>
</li>
<li>B) Storage Array response is sent back as expected.</li>
<li>C) CSI Driver makes a request to the Storage Array:
<ul>
<li>request is intercepted by the Sidecar Proxy to add the access token.</li>
<li>The CSM for Authorization Server deems the access token is invalid; it has since expired.</li>
</ul>
</li>
<li>D) The CSM for Authorization Server responds with HTTP 401 Unauthorized.</li>
<li>E) Sidecar Proxy requests a new access token by passing both refresh token and expired token.</li>
<li>F) The CSM for Authorization Server processes the request:
<ul>
<li>is the refresh token valid?</li>
<li>is the access token expired?</li>
<li>has the Tenant had access revoked?</li>
<li>a new access token is sent in response if the checks pass.</li>
</ul>
</li>
</ul>
<h3 id="roles">Roles</h3>
<p>So we know a token encodes both the identification of a Tenant and their Roles, but what&rsquo;s in a Role?</p>
<p>A role can be defined as follows:</p>
<ul>
<li>It has a name, e.g. &ldquo;role-a&rdquo;.</li>
<li>It can be bound to a Tenant</li>
<li>It can be unbound from a Tenant.</li>
<li>It determines access to zero or more storage pools and assigns a storage quota for each.
<ul>
<li>Quota represents the upper-limit of the total aggregation of used storage capacity for a Tenant&rsquo;s resources in a storage pool.</li>
</ul>
</li>
<li>It prevents ambiguity by identifying each storage pool in the form of <em>system-type:system-id:pool-name</em>.</li>
</ul>
<p>Below is an example of how roles are represented internally in JSON:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">&#34;Developer&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;system_types&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;powerflex&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">&#34;system_ids&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
          <span style="color:#204a87;font-weight:bold">&#34;542a2d5f5122210f&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#204a87;font-weight:bold">&#34;pool_quotas&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
              <span style="color:#204a87;font-weight:bold">&#34;bronze&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">99000000</span>
            <span style="color:#000;font-weight:bold">}</span>
          <span style="color:#000;font-weight:bold">}</span>
        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>This role says <em>Allow Tenants with the Developer role access to the bronze pool on PowerFlex system 542a2d5f5122210f, and cap their total capacity usage at 99000000Kb (99Gb).</em></p>
<h3 id="policy">Policy</h3>
<p>CSM for Authorization leverages the <a href="https://www.openpolicyagent.org/">Open Policy Agent</a> to use a policy-as-code approach to policy management. It stores a collection of policy files written in Rego language.  Each policy file defines a set of policy rules that form the basis of a policy decision. A policy decision is made by processing the inputs provided. For CSM for Authorization, the inputs are:</p>
<ul>
<li>The set of roles defined by the Storage Admin.</li>
<li>The claims section of a validated JWT.</li>
<li>The JSON payload of the storage request.</li>
</ul>
<p>Given these inputs, many decisions can be made to answer questions like &ldquo;Can Tenant X, with <em>these</em> roles provision <em>this</em> volume of size Y?&rdquo;.  The result of the policy decision will determine whether or not the request is proxied.</p>
<pre><code>                 +----------------+                   
                  |   Open Policy  |                   
                  |     Agent      |                   
                  |                |                   
  JWT             |   +--------+   |                   
 Claims ------\   |   | Policy | ----------&gt; Allow/Deny
               -----&gt; | (Rego) |   |                   
 Storage       -----&gt; +--------+   |                   
 Request -----/   +-------^--------+                   
                          |                            
                          |                            
                          |                            
                        Role                           
                        Data                           
</code></pre><h3 id="quota--volume-ownership">Quota &amp; Volume Ownership</h3>
<p>Policy decisions based on the current request and set of roles alone are not enough.  CSM for Authorization must maintain a cache of volumes approved for creation and deletion in order to know if a Tenant has already consumed their quota on a given storage pool.</p>
<p>A Redis database is used to store this volume data and their relationship with a Tenant, Storage Array and Pool. The use of composite keys provide fast, constant time look up of volumes, e.g. <code>quota:powerflex:542a2d5f5122210f:bronze:Tenant-1:data</code> is a Redis hash with volume data as its values.</p>
<h2 id="cross-cutting-concerns">Cross-Cutting Concerns</h2>
<p>This section documents the pieces of code that are general in nature and shared across multiple packages.</p>
<h3 id="logging">Logging</h3>
<p>CSM for Authorization uses the <a href="https://github.com/sirupsen/logrus">Logrus</a> package when logging messages.</p>
<h2 id="observability">Observability</h2>
<p>Both the CSM for Authorization Server and Sidecar Proxy are long-running processes, so it&rsquo;s important to understand what&rsquo;s going on inside. We use OpenTelemetry (otel) to help with that.</p>
<p>The following otel exporters are used:</p>
<ul>
<li><code>go.opentelemetry.io/otel/exporters/metric/prometheus</code></li>
<li><code>go.opentelemetry.io/otel/exporters/trace/zipkin</code></li>
<li><code>go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp</code></li>
</ul>

	
	

</div>


          </main>
        </div>
      </div>
    
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/dell/csm">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" href="http://del.ly/Slack_request">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 The Dell Technologies All Rights Reserved</small>
        <small class="ml-1"><a href="https://www.dell.com/learn/us/en/uscorp1/policies-privacy" target="_blank">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
   
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>









<script src="/csm-docs/js/main.min.664f21bf5eb0c31ebc661e2616e6c63e0448cec6d5636d869957be423c3cb952.js" integrity="sha256-Zk8hv16wwx68Zh4mFubGPgRIzsbVY22GmVe&#43;Qjw8uVI=" crossorigin="anonymous"></script>



  </body>
</html>
